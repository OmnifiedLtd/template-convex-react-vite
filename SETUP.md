# Setup Guide

This guide will help you set up this template for your own project.

## Prerequisites

- Node.js 20 or later
- npm or yarn
- A [Convex account](https://dashboard.convex.dev) (free)
- A [Resend account](https://resend.com) (free tier available)

## Step 1: Clone or Use This Template

If using GitHub's "Use this template" feature:
1. Click "Use this template" on GitHub
2. Create your new repository
3. Clone it locally

Or clone directly:
```bash
git clone <your-repo-url>
cd <your-repo-name>
```

## Step 2: Install Dependencies

```bash
npm install
```

## Step 3: Create a Convex Project

1. Sign up at [Convex Dashboard](https://dashboard.convex.dev) if you haven't already
2. Create a new project (e.g., "my-app")
3. Run the Convex dev command to link your local code:

```bash
npx convex dev
```

This will:
- Prompt you to select your Convex project
- Generate a `.env.local` file with your deployment credentials
- Push your schema to Convex
- Start watching for changes

**Note**: The command will ask you to choose between creating a new project or using an existing one. Choose your newly created project.

## Step 4: Configure Environment Variables

After running `npx convex dev`, your `.env.local` should look like:

```bash
# Auto-generated by Convex
CONVEX_DEPLOYMENT=dev:your-deployment-name
VITE_CONVEX_URL=https://your-deployment.convex.cloud

# Enable dev password auth for local testing
VITE_ENABLE_DEV_PASSWORD_AUTH=true
```

## Step 5: Set Up Resend for Email Authentication

1. Sign up at [resend.com](https://resend.com)
2. Get your API key from the dashboard
3. Add environment variables in Convex Dashboard:
   - Go to your project in [Convex Dashboard](https://dashboard.convex.dev)
   - Navigate to Settings > Environment Variables
   - Add these variables:
     ```
     AUTH_RESEND_KEY=re_your_resend_api_key
     SITE_URL=http://localhost:5173
     ```

**Important**: In Resend's free tier, you can only send emails to verified email addresses. Add your email address in Resend Dashboard > Domains > Verified addresses.

## Step 6: Start Development

```bash
npm run dev
```

This starts both:
- Vite dev server on http://localhost:5173
- Convex backend (watching for changes)

## Step 7: Test Authentication

1. Open http://localhost:5173
2. Click "Sign In"
3. Enter your email (must be verified in Resend)
4. Check your email for the OTP code
5. Enter the code to sign in

### Using Dev Password Auth (Optional)

If you have `VITE_ENABLE_DEV_PASSWORD_AUTH=true` in your `.env.local`, you can use:
- Email: `test@yourapp.local`
- Password: `TestUser2026#Secure!`

This bypasses the email flow for faster local testing.

## Step 8: Customize Your App

Now you're ready to build! Start by:

1. **Update branding**: Change "Your App Name" in `apps/app/src/components/layout/Header.tsx`
2. **Modify the home page**: Edit `apps/app/src/pages/Home.tsx`
3. **Add new features**: Follow the guide in `README.md` under "Adding New Features"

## Production Deployment

### Convex Backend

Deploy to production:

```bash
npx convex deploy --prod
```

Set production environment variables:

```bash
npx convex env set AUTH_RESEND_KEY your-key --prod
npx convex env set SITE_URL https://your-app.vercel.app --prod
```

### Frontend (Vercel)

1. Push your code to GitHub
2. Import project in [Vercel](https://vercel.com)
3. Set environment variable in Vercel:
   - `VITE_CONVEX_URL` - Your production Convex URL (from Convex Dashboard)
4. Deploy!

The production Convex URL can be found in:
- Convex Dashboard > Your Project > Settings > Production Deployment URL

## Troubleshooting

### Port 5173 is already in use

Run:
```bash
npm run dev:restart
```

This kills any processes on ports 5173-5175 and starts fresh.

### Authentication not working

1. Check that `SITE_URL` in Convex Dashboard matches your frontend URL
2. Verify your email is added in Resend Dashboard (for free tier)
3. Check browser console for errors

### Convex functions not updating

1. Make sure `npx convex dev` is running
2. Check for TypeScript errors in the terminal
3. Try restarting with `Ctrl+C` and `npm run dev`

## Next Steps

- Read `CLAUDE.md` for development guidelines
- Check `README.md` for feature examples
- Explore the `convex/` directory to understand the backend
- Review UI components in `apps/app/src/components/ui/`

## Support

- [Convex Discord](https://discord.gg/convex)
- [Convex Documentation](https://docs.convex.dev)
- [Convex Auth Documentation](https://labs.convex.dev/auth)
